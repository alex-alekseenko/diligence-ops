# Design System — Prism Grid

<!-- Auto-generated by design-toolkit/create-design-system on 2026-02-12 -->
<!-- Source: option-b-prism-v2.html (Revenue Dashboard + Sankey v2) -->
<!-- Output: design-systems/prism/ -->
<!-- To regenerate: ask Claude Code to "create design system" -->

## Brand DNA

Prism Grid is an **editorial data visualization** system — think financial newspaper infographic meets modern dashboard. The signature is a **warm parchment canvas** with a **serif + monospace** typography pairing (no sans-serif). All neutrals are **warm-tinted** (brown/amber hue ~72-85°), the opposite of the cool blue-gray typical in SaaS. The dot grid background adds subtle texture, referencing engineering paper and print design.

## Color Usage

| Token | Tailwind Class | Use For | Value |
|---|---|---|---|
| `--background` | `bg-background` | Page canvas — warm parchment | `oklch(0.980 0.008 80)` — #faf8f4 |
| `--foreground` | `text-foreground` | Headings, primary text — warm near-black | `oklch(0.172 0.012 75)` — #1a1814 |
| `--primary` | `bg-primary text-primary-foreground` | CTAs, links, revenue data | `oklch(0.623 0.140 255)` — #4a90d9 blue |
| `--secondary` | `bg-secondary text-secondary-foreground` | Warm cream surfaces, subtle backgrounds | `oklch(0.957 0.014 85)` — #f4f0e8 |
| `--muted` | `bg-muted text-muted-foreground` | Subdued backgrounds, helper text | `oklch(0.957 0.014 85)` / `oklch(0.604 0.018 73)` |
| `--accent` | `bg-accent text-accent-foreground` | Hover backgrounds, highlighted rows | `oklch(0.965 0.015 250)` — #edf3fb light blue |
| `--destructive` | `bg-destructive text-destructive-foreground` | Cost/expense data, negative deltas, errors | `oklch(0.590 0.170 25)` — #d95a5a red |
| `--card` | `bg-card text-card-foreground` | White panels elevated on warm canvas | `oklch(1 0 0)` — #ffffff |
| `--popover` | `bg-popover text-popover-foreground` | Dropdowns, tooltips, popovers | `oklch(1 0 0)` — #ffffff |
| `--border` | `border-border` | Panel borders, dividers | `oklch(0.806 0.013 76)` — #c4bfb6 warm gray |
| `--input` | `border-input` | Input field borders, ghost borders | `oklch(0.906 0.010 78)` — #e4e0d8 |
| `--ring` | `ring-ring` | Focus rings | `oklch(0.623 0.140 255)` — matches primary blue |

### Semantic Data Colors

| Token | Tailwind Class | Value | Use For |
|---|---|---|---|
| `--revenue` | `text-[var(--revenue)]` | `oklch(0.623 0.140 255)` — #4a90d9 blue | Revenue figures, positive financial data |
| `--profit` | `text-[var(--profit)]` | `oklch(0.635 0.144 160)` — #3aaa6d green | Profit margins, success states, up-arrows |
| `--cost` | `text-[var(--cost)]` | `oklch(0.590 0.170 25)` — #d95a5a red | Costs, expenses, negative deltas |
| `--ochre` | `text-[var(--ochre)]` | `oklch(0.700 0.140 80)` — #c49a3c gold | Warning accents, tertiary data category |

Each semantic color has a `-light` variant for tinted backgrounds: `--revenue-light`, `--profit-light`, `--cost-light`, `--ochre-light`.

### Chart Colors

| Token | Tailwind Class | Value |
|---|---|---|
| `--chart-1` | `text-chart-1` | `oklch(0.623 0.140 255)` — revenue blue |
| `--chart-2` | `text-chart-2` | `oklch(0.635 0.144 160)` — profit green |
| `--chart-3` | `text-chart-3` | `oklch(0.590 0.170 25)` — cost red |
| `--chart-4` | `text-chart-4` | `oklch(0.700 0.140 80)` — ochre gold |
| `--chart-5` | `text-chart-5` | `oklch(0.604 0.018 73)` — warm muted gray |

**Rules:**
- NEVER hardcode hex/rgb/oklch values. Always use semantic tokens.
- NEVER use Tailwind palette colors directly (no `bg-blue-500`, `text-gray-700`).
- Use `text-foreground` for primary text, `text-muted-foreground` for secondary.
- Every color must come from these variables. `bg-[#hex]` is a bug.
- Prism's color DNA is **warm-tinted neutrals** (brown/amber hue ~75°) + **blue primary**. The gray palette has a warm undertone, NOT cool/blue-tinted like Stripe or Vercel.

## Typography

| Element | Font Family | Size | Weight | Extra |
|---|---|---|---|---|
| Hero title | Fraunces (serif) | clamp(36px, 5.5vw, 60px) | 700 | letter-spacing: -1px, line-height: 1 |
| Hero italic accent | Fraunces italic | same | 400 | font-style: italic, colored primary |
| Section heading | Fraunces (serif) | 20px | 600 | — |
| Section heading em | Fraunces italic | 20px | 400 | color: muted-foreground |
| Panel title | Fraunces (serif) | 16px | 600 | border-bottom divider |
| Ticker value | Fraunces (serif) | 28px | 600 | line-height: 1 |
| Metric tile value | Fraunces (serif) | 24px | 600 | — |
| Sankey node value | Fraunces (serif) | 12px | 400 | color: muted-foreground |
| Body text | IBM Plex Mono | 12px | 400 | monospace throughout |
| Labels (uppercase) | IBM Plex Mono | 10-11px | 500 | text-transform: uppercase, letter-spacing: 1.5-3px |
| Captions | IBM Plex Mono | 9-10px | 400 | color: ink-faint |
| Header tag | IBM Plex Mono | 10px | 500 | letter-spacing: 3px, uppercase, color: primary |

**Font stack:**
- Display/Heading: `'Fraunces', serif` — Variable serif by Undercase Type (Google Fonts)
  - Optical size axis: 9-144
  - Weight range: 300-700
  - Italic axis supported
- Body/Mono: `'IBM Plex Mono', monospace` — IBM's monospace (Google Fonts)
  - Weights: 400, 500

**Key characteristic:** The Fraunces + IBM Plex Mono pairing creates an editorial, newspaper-infographic feel. Fraunces is used exclusively for display numbers and headings (never for body copy). IBM Plex Mono handles all body text, labels, and UI chrome — giving the dashboard a technical, precise quality. No sans-serif font is used anywhere.

**Italic convention:** Fraunces italic (weight 400) is used for section subtitle emphasis ("— revenue vs costs") in a muted color, creating elegant inline annotations.

## Spacing

Base unit: 4px

| Context | Value | Usage |
|---|---|---|
| Dashboard max-width | 1160px | `.dashboard { max-width: 1160px }` |
| Dashboard padding | 56px 32px | Top/bottom 56px, left/right 32px |
| Header margin-bottom | 56px | Large separation before content |
| Section margin-bottom | 40px | Between dashboard sections |
| Panel padding | 32px | Inside white card panels |
| Ticker item padding | 20px 24px | Inside ticker strip cells |
| Bottom grid gap | 24px | Between bottom panels |
| Stack row margin | 16px | Between stacked bar rows |
| Section header padding-bottom | 8px | Below section title divider |
| Legend padding | 12px 16px | Inside legend strip |

**Rules:**
- Prism uses generous spacing — 56px for major sections, 40px between sections, 32px inside panels.
- Stick to the 4px grid: 4, 8, 12, 16, 20, 24, 32, 40, 56px.
- NEVER use arbitrary spacing like `p-[13px]` or `mt-[7px]`.

## Border Radius

Base radius: `--radius: 0.125rem` (2px)

| Element | Value | Usage |
|---|---|---|
| Panels, cards | 2px | `border-radius: 2px` — very minimal |
| Buttons (period pills) | 2px with 0 internal | First: `2px 0 0 2px`, Last: `0 2px 2px 0` |
| Bars, segments | 1px | `rx: 1` on SVG rects |
| Legend swatches | 1px | Minimal rounding |
| Badges, pills | 2px | Same as panels |

**Key characteristic:** Prism uses an extremely minimal 2px radius everywhere — almost square. This is intentional: it reinforces the editorial, printed-document aesthetic. Cards look like cut paper or newspaper column panels rather than software widgets.

## Shadows

| Context | Token |
|---|---|
| Cards at rest | None — Prism uses **borders only**, no shadows |
| Tooltips | `box-shadow: 0 8px 32px rgba(0,0,0,0.15)` — only on dark tooltip overlays |
| General elevation | Borders (`1px solid var(--ink-faint)`) instead of shadows |

**Rule:** Prism is a **flat design with borders** — elevation comes from white panels on the warm canvas background, not from shadows. The only shadow in the entire design is on dark tooltips. This is a deliberate editorial choice.

## Background Pattern

The signature Prism dot grid:

```css
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: radial-gradient(circle, var(--grid-dot) 1px, transparent 1px);
  background-size: 24px 24px;
  pointer-events: none;
  z-index: 0;
}
```

- Dot size: 1px
- Grid spacing: 24px
- Color: `rgba(26,24,20,0.08)` — 8% opacity of ink color
- Fixed position (doesn't scroll)
- Below all content (z-index: 0)

## Component Patterns

### Dashboard Layout

```
.dashboard { max-width: 1160px; margin: 0 auto; padding: 56px 32px; position: relative; z-index: 1; }
```

### Header

- Grid layout: `grid-template-columns: 1fr auto`
- Tag above title: 10px uppercase, letter-spacing 3px, primary color
- Title: Fraunces 700, clamp(36px, 5.5vw, 60px)
- Italic accent word in primary color
- Meta info: right-aligned, 11px, muted color
- Bottom border: 2px solid ink (heavy divider)

### Ticker Strip

- Flex container, no gap, shared border
- Items: flex: 1, separated by 1px borders
- Index badge: `::before` pseudo-element with `data-idx` attribute, 9px, faint
- Label: 10px uppercase, letter-spacing 1.5px
- Value: Fraunces 28px, semantic color
- Delta: 11px, up=profit green, down=cost red

### Panel (Card)

- White background, 1px border ink-faint, 2px radius, 32px padding
- SVG charts fill width: `svg { width: 100%; height: auto; overflow: visible; }`

### Section Header

- Flex between title and controls
- Title: Fraunces 20px semibold + italic muted subtitle
- Period pills: connected button group, monospace 11px

### Bottom Grid

- `grid-template-columns: 3fr 2fr` (wider left panel)
- Gap: 24px

### Stacked Bars

- Track: 24px height, warm cream background, 2px radius
- Segments: flex items with `data-pct` labels inside
- Labels: 9px white text centered in segment

### Metric Tiles

- 2×2 grid
- Tinted background using semantic `-light` colors
- Centered layout: label (9px uppercase) + value (Fraunces 24px) + sub (10px muted)

### Tooltips (Dark)

- Background: ink (#1a1814), text: canvas (#faf8f4)
- 2px radius, 12-14px padding
- Caret: CSS ::after rotated square
- Sections: title (Fraunces 15px) + rows (flex between label/value) + dividers
- Boundary detection: flips caret direction when near edges

### Footer

- Flex between, 10px faint text, 1px top border
- letter-spacing: 0.5px

## Responsive Breakpoints

| Breakpoint | Tailwind Prefix | Min Width | Use |
|---|---|---|---|
| Mobile | _(default)_ | 0px | Single column, stacked layout |
| Tablet | `md:` | 768px | Full layout restores |

**Mobile adaptations (≤768px):**
- Header: single column
- Ticker strip: wraps to 2×3 grid (flex-wrap, 45% basis)
- Bottom grid: single column
- Sankey legend: wraps
- Sankey chart: horizontal scroll with scroll hint indicator
- Sankey SVG: min-width 750px (doesn't shrink below usable size)

## Animation

- Section entrances: `slideIn` 700ms ease-out with staggered delays
- Data bars: `barSlide` 600ms with spring easing `cubic-bezier(0.22, 1, 0.36, 1)`
- Trend line: `strokeDraw` 2500ms — slow SVG line draw
- Sankey: column-staggered `sankeyFadeIn` 500ms ease-out
- Tooltips: 150ms opacity transition
- See `motion-system.css` and `motion-system.md` for full motion documentation
- ALWAYS support `prefers-reduced-motion` — Prism explicitly handles it
- NEVER use animation that delays critical data visibility > 700ms

## Accessibility

- Sankey SVG: `role="img"`, `aria-label`, `<title>`, `<desc>` elements
- Sankey nodes: `tabindex="0"`, `role="button"`, descriptive `aria-label` with value + percentage
- Keyboard navigation: focus triggers same highlight as hover
- Sankey focus ring: 2.5px revenue blue stroke
- `prefers-reduced-motion`: all animations disabled, flow dots hidden
- Color: Sankey legend includes pattern indicators (stripes, hatching) for colorblind users
- Touch: dedicated touch interaction mode (click-to-toggle vs hover)

## DO NOT

- Use inline styles (`style={{}}`) except for data-driven values (chart dimensions, dynamic colors)
- Hardcode colors, spacing, or breakpoints — use tokens and Tailwind scale
- Use arbitrary Tailwind values: `bg-[#hex]`, `p-[17px]`, `w-[calc(...)]`
- Use sans-serif fonts — Prism is serif (Fraunces) + mono (IBM Plex Mono) only
- Use cool/blue-tinted grays — Prism's palette is warm (brown/amber hue ~75°)
- Use heavy shadows — Prism is flat with borders, shadows are for tooltips only
- Use border-radius larger than 2px — the editorial aesthetic demands near-square corners
- Use Tailwind palette colors (`bg-blue-500`, `text-gray-700`) — always use semantic tokens
- Add sans-serif body text — all UI text is monospace (IBM Plex Mono)
- Use bounce or elastic easing — the spring curve `cubic-bezier(0.22, 1, 0.36, 1)` is the limit
- Add hover shadow/scale effects to panels — Prism panels are static
- Mix data colors outside their semantic meaning (blue=revenue, green=profit, red=cost, gold=accent)
- Use the dot grid pattern color darker than 10% opacity — it must remain ambient
